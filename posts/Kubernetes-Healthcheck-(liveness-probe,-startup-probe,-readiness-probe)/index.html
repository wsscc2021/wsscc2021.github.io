<!DOCTYPE html><html lang="en" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="day-prompt" content="days ago"><meta name="hour-prompt" content="hours ago"><meta name="minute-prompt" content="minutes ago"><meta name="justnow-prompt" content="just now"><meta name="generator" content="Jekyll v4.2.1" /><meta property="og:title" content="Kubernetes - Healthcheck (liveness-probe, startup-probe, readiness-probe)" /><meta name="author" content="D.G.Lee" /><meta property="og:locale" content="en" /><meta name="description" content="Overview" /><meta property="og:description" content="Overview" /><link rel="canonical" href="https://wsscc2021.github.io/posts/Kubernetes-Healthcheck-(liveness-probe,-startup-probe,-readiness-probe)/" /><meta property="og:url" content="https://wsscc2021.github.io/posts/Kubernetes-Healthcheck-(liveness-probe,-startup-probe,-readiness-probe)/" /><meta property="og:site_name" content="D.G.Lee" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2021-10-07T20:30:00+09:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="Kubernetes - Healthcheck (liveness-probe, startup-probe, readiness-probe)" /><meta name="google-site-verification" content="google_meta_tag_verification" /> <script type="application/ld+json"> {"author":{"@type":"Person","name":"D.G.Lee"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://wsscc2021.github.io/posts/Kubernetes-Healthcheck-(liveness-probe,-startup-probe,-readiness-probe)/"},"description":"Overview","url":"https://wsscc2021.github.io/posts/Kubernetes-Healthcheck-(liveness-probe,-startup-probe,-readiness-probe)/","@type":"BlogPosting","headline":"Kubernetes - Healthcheck (liveness-probe, startup-probe, readiness-probe)","dateModified":"2021-10-08T09:16:57+09:00","datePublished":"2021-10-07T20:30:00+09:00","@context":"https://schema.org"}</script><title>Kubernetes - Healthcheck (liveness-probe, startup-probe, readiness-probe) | D.G.Lee</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="D.G.Lee"><meta name="application-name" content="D.G.Lee"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://fonts.gstatic.com"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="preconnect" href="https://cdn.jsdelivr.net"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1.1.0/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script><body data-spy="scroll" data-target="#toc"><div id="sidebar" class="d-flex flex-column align-items-end" lang="en"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" alt="avatar" class="mx-auto"> <img src="/assets/img/avatar.png" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">D.G.Lee</a></div><div class="site-subtitle font-italic">I'm interested in cloud-computing and believe in the power of communication.</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tags ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center"> <a href="https://github.com/wsscc2021" aria-label="github" class="order-3" target="_blank" rel="noopener"> <i class="fab fa-github-alt"></i> </a> <a href="https://twitter.com/" aria-label="twitter" class="order-4" target="_blank" rel="noopener"> <i class="fab fa-twitter"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['piou987','gmail.com'].join('@')" aria-label="email" class="order-5" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" class="order-6" > <i class="fas fa-rss"></i> </a> <span class="icon-border order-2"></span> <span id="mode-toggle-wrapper" class="order-1"> <i class="mode-toggle fas fa-adjust"></i> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } var self = this; /* always follow the system prefers */ this.sysDarkPrefers.addListener(function() { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.updateMermaid(); }); } /* constructor() */ setDark() { $('html').attr(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_KEY); sessionStorage.removeItem(ModeToggle.MODE_KEY); } get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode == ModeToggle.DARK_MODE; } get isLightMode() { return this.mode == ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer) ) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } updateMermaid() { if (typeof mermaid !== "undefined") { let expectedTheme = (this.modeStatus === ModeToggle.DARK_MODE? "dark" : "default"); let config = { theme: expectedTheme }; /* re-render the SVG › <https://github.com/mermaid-js/mermaid/issues/311#issuecomment-332557344> */ $(".mermaid").each(function() { let svgCode = $(this).prev().children().html(); $(this).removeAttr("data-processed"); $(this).html(svgCode); }); mermaid.initialize(config); mermaid.init(undefined, ".mermaid"); } } flipMode() { if (this.hasMode) { if (this.isSysDarkPrefer) { if (this.isLightMode) { this.clearMode(); } else { this.setLight(); } } else { if (this.isDarkMode) { this.clearMode(); } else { this.setDark(); } } } else { if (this.isSysDarkPrefer) { this.setLight(); } else { this.setDark(); } } this.updateMermaid(); } /* flipMode() */ } /* ModeToggle */ let toggle = new ModeToggle(); $(".mode-toggle").click(function() { toggle.flipMode(); }); </script> </span></div></div><div id="topbar-wrapper" class="row justify-content-center topbar-down"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> Home </a> </span> <span>Kubernetes - Healthcheck (liveness-probe, startup-probe, readiness-probe)</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> <i class="fa fa-times-circle fa-fw" id="search-cleaner"></i> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="post-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>Kubernetes - Healthcheck (liveness-probe, startup-probe, readiness-probe)</h1><div class="post-meta text-muted d-flex flex-column"><div> <span class="semi-bold"> D.G.Lee </span> on <span class="timeago " data-toggle="tooltip" data-placement="bottom" title="Thu, Oct 7, 2021, 8:30 PM +0900" >Oct 7<i class="unloaded">2021-10-07T20:30:00+09:00</i> </span></div><div> <span> Updated <span class="timeago lastmod" data-toggle="tooltip" data-placement="bottom" title="Fri, Oct 8, 2021, 9:16 AM +0900" >Oct 8<i class="unloaded">2021-10-08T09:16:57+09:00</i> </span> </span> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="1596 words">8 min read</span></div></div><div class="post-content"><h2 id="overview">Overview</h2><p>Kubernetes에서는 pod 의 상태를 확인하기 위해서 <code class="language-plaintext highlighter-rouge">liveness-probe</code>, <code class="language-plaintext highlighter-rouge">startup-probe</code>, <code class="language-plaintext highlighter-rouge">readiness-probe</code>가 사용됩니다. 각각을 살펴보면서 어떻게 활용할지에 대한 고민을 해봅니다. (HTTP, TCP, Exec 3가지 타입의 probe가 존재하지만, 가장 많이 사용되는 HTTP probe 타입으로 진행합니다.)</p><h2 id="liveness-probe">liveness probe</h2><p>liveness probe는 에러가 발생하여 요청을 처리할 수 없는 상태의 <strong>pod를 재시작</strong>하는 것에 사용됩니다. (Self-Healing)</p><p>liveness probe는 healthcheck에 실패한 pod를 kill하고, 다시 시작합니다.</p><div class="language-plaintext highlighter-rouge"><div class="code-header" text-data="plaintext"><button data-original-title="Copied!"><i class="far fa-clone"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre><td class="rouge-code"><pre>livenessProbe:
  httpGet:
    path: /healthcheck/liveness
    port: 8080
  initialDelaySeconds: 0 # default 0, 어플리케이션이 시작될때까지 기다리는 시간입니다.
  periodSeconds: 10 # default 10, Healthcheck 요청을 보내는 주기(Interval)입니다.
  timeoutSeconds: 5 # default 1, Healthcheck 요청의 타임아웃 값입니다.
  failureThreshold: 3 # default 3, 3번 이상 실패하면 파드를 재시작합니다.
  successThreshold: 1 # default 1, 1번 이상 성공하면 Running 상태로 넘어갑니다.
</pre></table></code></div></div><h2 id="startup-probe">startup probe</h2><p>파드는 어플리케이션이 시작될 때 까지 요청을 처리하지 못할 수 있습니다. 이 시기에 <strong><code class="language-plaintext highlighter-rouge">liveness probe</code>로 파드가 재시작되는 것을 방지</strong>하기 위해서 사용됩니다. 이는 <code class="language-plaintext highlighter-rouge">initialDelaySeconds</code> 옵션과 흡사하지만, 동적인 것과 정적인 것의 차이를 줄 수 있습니다.</p><blockquote><p><code class="language-plaintext highlighter-rouge">initialDelaySeconds</code>는 정적으로 시간을 지정하여 어플리케이션 시작을 기다리지만, <code class="language-plaintext highlighter-rouge">startup probe</code>는 동적인 시간 대역을 가져갈 수 있습니다.</p></blockquote><p>어플리케이션이 시작되는 데 걸리는 시간이 항상 일정할 수도 있지만, 구성 파일을 로드할 때 발생하는 지연시간, 서버의 리소스 사용률이 높을 경우 발생하는 지연시간 등의 여러 상황들로 인해서 시작되는 시간이 변동될 수 있습니다. 그리고 이러한 경우 <code class="language-plaintext highlighter-rouge">startup probe</code>가 유용하게 활용됩니다.</p><p><code class="language-plaintext highlighter-rouge">startup probe</code> 는 healthcheck에 성공할 때까지 <code class="language-plaintext highlighter-rouge">liveness probe</code>, <code class="language-plaintext highlighter-rouge">readiness probe</code>를 시작하지 않습니다.</p><div class="language-plaintext highlighter-rouge"><div class="code-header" text-data="plaintext"><button data-original-title="Copied!"><i class="far fa-clone"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
</pre><td class="rouge-code"><pre>livenessProbe:
  httpGet:
    path: /healthcheck/liveness
    port: 8080
  initialDelaySeconds: 0 # default 0, 어플리케이션이 시작될때까지 기다리는 시간입니다.
  periodSeconds: 10 # default 10, Healthcheck 요청을 보내는 주기(Interval)입니다.
  timeoutSeconds: 5 # default 1, Healthcheck 요청의 타임아웃 값입니다.
  failureThreshold: 3 # default 3, 3번 이상 실패하면 파드를 재시작합니다.
  successThreshold: 1 # default 1, 1번 이상 성공하면 Running 상태로 넘어갑니다.

startupProbe:
  httpGet:
    path: /healthcheck/liveness
    port: 8080
  initialDelaySeconds: 0 # default 0, 어플리케이션이 시작될때까지 기다리는 시간입니다.
  periodSeconds: 10 # default 10, Healthcheck 요청을 보내는 주기(Interval)입니다.
  timeoutSeconds: 5 # default 1, Healthcheck 요청의 타임아웃 값입니다.
  failureThreshold: 6 # default 3, 3번 이상 실패하면 readiness probe, liveness probe를 시작하지 않습니다.
  successThreshold: 1 # default 1, 1번 이상 성공하면 readiness probe와 liveness probe를 시작합니다.
</pre></table></code></div></div><h2 id="readiness-probe">readiness probe</h2><p>파드에 트래픽이 몰려 cpu/memory 사용률이 일정 수준 이상 높아지면 요청을 처리하는 것에 지연이 생기거나 500에러가 발생하여 Healthcheck에 실패할 수 있습니다. 이는 어플리케이션의 에러가 아니며 cpu/memory 사용률을 낮춰주면 자연스럽게 해결되는 문제입니다. 이럴 경우 readiness probe을 활용하여 트래픽을 받지 않음으로써 cpu/memory 사용률을 낮춰주는 역할을 수행할 수 있습니다.</p><p><code class="language-plaintext highlighter-rouge">readiness probe</code>에 실패한 파드는 <strong>요청을 받지 않습니다.</strong></p><div class="language-plaintext highlighter-rouge"><div class="code-header" text-data="plaintext"><button data-original-title="Copied!"><i class="far fa-clone"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre><td class="rouge-code"><pre>readinessProbe:
  httpGet:
    path: /healthcheck/readiness
    port: 8080
  initialDelaySeconds: 0 # default 0, 어플리케이션이 시작될때까지 기다리는 시간입니다.
  periodSeconds: 10 # default 10, Healthcheck 요청을 보내는 주기(Interval)입니다.
  timeoutSeconds: 5 # default 1, Healthcheck 요청의 타임아웃 값입니다.
  failureThreshold: 3 # default 3, 3번 이상 실패하면 파드에 요청을 받지 않습니다.
  successThreshold: 1 # default 1, 1번 이상 성공하면 파드에 요청을 받습니다.
</pre></table></code></div></div><p><code class="language-plaintext highlighter-rouge">readiness probe</code>의 동작을 정확하게 이해하기 위해서는 서비스, 엔드포인트, 파드 리소스의 네트워크 연결이 어떻게 이뤄지는 지 이해해야 합니다.</p><p><img data-proofer-ignore data-src="/assets/img/posts/2021-10-07-Kubernetes - Healthcheck (liveness-probe, startup-probe, readiness-probe)/readinessprobe.png" alt="readinessprobe.png" /></p><p>위 그림에서 볼 수 있듯이, 파드는 서비스 리소스에 연결되기 전에 endpoints라는 리소스에 연결되며 endpoints 리소스 내부적으로는 <code class="language-plaintext highlighter-rouge">Addresses</code> 에 등록된 IP만 서비스 리소스에 연결됩니다. 즉, <code class="language-plaintext highlighter-rouge">NotReadyAddresses</code>로 등록된 IP는 서비스 리소스에 연결되지 않으며 요청을 받을 수 없는 상태가 됩니다.</p><p>그리고 <code class="language-plaintext highlighter-rouge">readiness probe </code>에 실패한 파드는 endpoints 리소스의 <code class="language-plaintext highlighter-rouge">NotReadyAddresses</code>로 등록됩니다.</p><div class="language-bash highlighter-rouge"><div class="code-header" text-data="bash"><button data-original-title="Copied!"><i class="far fa-clone"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre><td class="rouge-code"><pre>kubectl describe pod &lt;pod-name&gt;

<span class="c"># Name:         kubia-readiness-pod</span>
<span class="c"># ...</span>
<span class="c"># IP:           10.0.45.55</span>
</pre></table></code></div></div><div class="language-bash highlighter-rouge"><div class="code-header" text-data="bash"><button data-original-title="Copied!"><i class="far fa-clone"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre><td class="rouge-code"><pre>kubectl describe endpoints &lt;service-name&gt;

<span class="c"># Name:         kubia-readiness-clusterip</span>
<span class="c"># ...</span>
<span class="c"># Subsets:</span>
<span class="c">#  Addresses:          &lt;none&gt;</span>
<span class="c">#  NotReadyAddresses:  10.0.45.55</span>
</pre></table></code></div></div><p>만약 liveness probe로 파드가 재시작되기 전에 트래픽을 완화하기 위한 용도로 readiness probe를 사용한다면 아래를 주의해야 하여 설정하는 것이 좋습니다.</p><ul><li>readiness probe는 liveness probe와 다른 엔드포인트로 healthcheck를 진행합니다.<li>readiness probe는 liveness probe보다 먼저 동작해야합니다.</ul><h2 id="결론">결론</h2><p><code class="language-plaintext highlighter-rouge">liveness probe</code>와 <code class="language-plaintext highlighter-rouge">startup probe</code>는 파드의 self-healing을 위해서 반드시 사용되어야 하지만 정확하게 이해하지 못한다면 pod가 무분별하게 재시작되어 시스템에 악영향을 줄 수 있기 때문에 조심해야 합니다. <code class="language-plaintext highlighter-rouge">readiness probe</code>는 어플리케이션 시작 후 liveness probe의 무분별한 파드 재시작을 억제하기 위해서 사용될 수 있을 것입니다. 이를 위해서 liveness probe와 다른 엔드포인트로 healthcheck를 진행하며 liveness probe보다 먼저 동작하도록 설정해야 합니다.</p></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/devops/'>DevOps</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/devops/" class="post-tag no-text-decoration" >DevOps</a> <a href="/tags/container/" class="post-tag no-text-decoration" >Container</a> <a href="/tags/kubernetes/" class="post-tag no-text-decoration" >Kubernetes</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=Kubernetes - Healthcheck (liveness-probe, startup-probe, readiness-probe) - D.G.Lee&url=https://wsscc2021.github.io/posts/Kubernetes-Healthcheck-(liveness-probe,-startup-probe,-readiness-probe)/" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=Kubernetes - Healthcheck (liveness-probe, startup-probe, readiness-probe) - D.G.Lee&u=https://wsscc2021.github.io/posts/Kubernetes-Healthcheck-(liveness-probe,-startup-probe,-readiness-probe)/" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://telegram.me/share?text=Kubernetes - Healthcheck (liveness-probe, startup-probe, readiness-probe) - D.G.Lee&url=https://wsscc2021.github.io/posts/Kubernetes-Healthcheck-(liveness-probe,-startup-probe,-readiness-probe)/" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="Copy link" title-succeed="Link copied successfully!"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted topbar-down"><div class="access"><div id="access-lastmod" class="post"> <span>Recent Update</span><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/%EC%BB%A8%ED%85%8C%EC%9D%B4%EB%84%88-%EA%B8%B0%EC%88%A0-%EC%9D%B4%ED%95%B4%ED%95%98%EA%B8%B0/">컨테이너 기술 이해하기</a><li><a href="/posts/%EB%A7%88%EC%9D%B4%ED%81%AC%EB%A1%9C%EC%84%9C%EB%B9%84%EC%8A%A4-%EC%95%84%ED%82%A4%ED%85%8D%EC%B2%98-%EC%9D%B4%ED%95%B4%ED%95%98%EA%B8%B0/">마이크로서비스 아키텍처 이해하기</a><li><a href="/posts/Kubernetes-Healthcheck-(liveness-probe,-startup-probe,-readiness-probe)/">Kubernetes - Healthcheck (liveness-probe, startup-probe, readiness-probe)</a><li><a href="/posts/Pyhton-TypeError-%EC%A4%84%EC%9D%B4%EA%B8%B0-(Function-Annotation,-MyPy)/">Pyhton - TypeError 줄이기 (Function Annotation, MyPy)</a><li><a href="/posts/%EB%B8%94%EB%A1%9C%EA%B7%B8-%EC%8B%9C%EC%9E%91%ED%95%98%EA%B8%B0/">블로그 시작하기</a></ul></div><div id="access-tags"> <span>Trending Tags</span><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/devops/">DevOps</a> <a class="post-tag" href="/tags/blog-management/">Blog-management</a> <a class="post-tag" href="/tags/kubernetes/">Kubernetes</a> <a class="post-tag" href="/tags/python/">Python</a> <a class="post-tag" href="/tags/container/">Container</a> <a class="post-tag" href="/tags/architect/">Architect</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"> <span class="pl-3 pt-2 mb-2">Contents</span><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="post-extend-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/%EC%BB%A8%ED%85%8C%EC%9D%B4%EB%84%88-%EA%B8%B0%EC%88%A0-%EC%9D%B4%ED%95%B4%ED%95%98%EA%B8%B0/"><div class="card-body"> <span class="timeago small" >Oct 8<i class="unloaded">2021-10-08T18:00:00+09:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>컨테이너 기술 이해하기</h3><div class="text-muted small"><p> Overview 이전 글에서 MSA(Micro Service Architecture) 를 이해하였습니다. 컨테이너는 MSA의 시대가 열리면서 굉장히 주목받게된 기술 중에 하나이기 때문에 연관지어 이해할 필요가 있습니다. MSA 에서는 하나의 큰 어플리케이션이 작은 단위의 서비스 여러개로 나뉘고, 각 서비스는 서로에게 영향을 주지않고 운영되어야 하기...</p></div></div></a></div><div class="card"> <a href="/posts/Kubernetes-Pod-%EB%B6%88%EA%B7%A0%ED%98%95-%EC%97%86%EC%95%A0%EA%B3%A0-%EA%B0%80%EC%9A%A9%EC%84%B1-%EB%86%92%EC%9D%B4%EA%B8%B0/"><div class="card-body"> <span class="timeago small" >Oct 19<i class="unloaded">2021-10-19T16:00:00+09:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Kubernetes - Pod 불균형 없애고 가용성 높이기</h3><div class="text-muted small"><p> Pod 불균형 파드를 생성할 때에 스케줄링에 아무런 제약을 주지 않으면 리소스 공간이 있는 노드에 무분별하게 스케줄링된다. 이러한 스케줄링 방식은 시스템 가용성의 허점을 줄 수 있다. 아래를 살펴보자. 서비스가 현재 트래픽을 견디기 위해서 4.0 CPU Core를 필요로 하고, 이를 위해서 2.0 CPU Core 를 가지는 파드를 4대 운영하고 있...</p></div></div></a></div><div class="card"> <a href="/posts/Kubernetes-Cluster-Autoscaler-+-OverProvisioning/"><div class="card-body"> <span class="timeago small" >Oct 27<i class="unloaded">2021-10-27T15:00:00+09:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Kubernetes - Cluster Autoscaler + OverProvisioning</h3><div class="text-muted small"><p> 컨테이너 생성 시간 vs VM 생성 시간 컨테이너는 VM보다 경량적인 isolation 기술로써, VM보다 이미지 크기가 작고 빠르게 프로비저닝되는 장점을 가지고 있습니다. 이는 분산 시스템 형태에서 수평적 확장을 수행하는 클라우드 환경에서 더욱 부각됩니다. 때문에 일반적으로 클라우드 환경에서는 클라우드 업체에서 제공해주는 VM 위에서 경량의 컨테...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/%EB%A7%88%EC%9D%B4%ED%81%AC%EB%A1%9C%EC%84%9C%EB%B9%84%EC%8A%A4-%EC%95%84%ED%82%A4%ED%85%8D%EC%B2%98-%EC%9D%B4%ED%95%B4%ED%95%98%EA%B8%B0/" class="btn btn-outline-primary" prompt="Older"><p>마이크로서비스 아키텍처 이해하기</p></a> <a href="/posts/%EC%BB%A8%ED%85%8C%EC%9D%B4%EB%84%88-%EA%B8%B0%EC%88%A0-%EC%9D%B4%ED%95%B4%ED%95%98%EA%B8%B0/" class="btn btn-outline-primary" prompt="Newer"><p>컨테이너 기술 이해하기</p></a></div><script src="https://utteranc.es/client.js" repo="wsscc2021/wsscc2021.github.io" issue-term="title" theme="github-light" crossorigin="anonymous" async> </script></div></div></div><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center"><div class="footer-left"><p class="mb-0"> © 2021 <a href="https://github.com/wsscc2021/wsscc2021.github.io">wsscc2021</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><h4 class="text-muted mb-4">Trending Tags</h4><a class="post-tag" href="/tags/devops/">DevOps</a> <a class="post-tag" href="/tags/blog-management/">Blog management</a> <a class="post-tag" href="/tags/kubernetes/">Kubernetes</a> <a class="post-tag" href="/tags/python/">Python</a> <a class="post-tag" href="/tags/container/">Container</a> <a class="post-tag" href="/tags/architect/">Architect</a></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><script src="https://cdn.jsdelivr.net/npm/mermaid@8/dist/mermaid.min.js"></script> <script> $(function() { let initTheme = "default"; if ($("html[mode=dark]").length > 0 || ($("html[mode]").length == 0 && window.matchMedia("(prefers-color-scheme: dark)").matches ) ) { initTheme = "dark"; } let mermaidConf = { theme: initTheme /* <default|dark|forest|neutral> */ }; /* Markdown converts to HTML */ $("pre").has("code.language-mermaid").each(function() { let svgCode = $(this).children().html(); $(this).addClass("unloaded"); $(this).after(`<div class=\"mermaid\">${svgCode}</div>`); }); mermaid.initialize(mermaidConf); }); </script><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="https://wsscc2021.github.io{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/lozad/dist/lozad.min.js,npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script> /* see: <https://docs.mathjax.org/en/latest/options/input/tex.html#tex-options> */ MathJax = { tex: { inlineMath: [ /* start/end delimiter pairs for in-line math */ ['$','$'], ['\\(','\\)'] ], displayMath: [ /* start/end delimiter pairs for display math */ ['$$', '$$'], ['\\[', '\\]'] ] } }; </script> <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script> <script type="text/javascript" id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"> </script> <script src="https://cdn.jsdelivr.net/combine/npm/popper.js@1.16.1,npm/bootstrap@4/dist/js/bootstrap.min.js"></script> <script defer src="/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id=G-2Y7BLPLM54"></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'G-2Y7BLPLM54'); }); </script>
