<!DOCTYPE html><html lang="en" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="day-prompt" content="days ago"><meta name="hour-prompt" content="hours ago"><meta name="minute-prompt" content="minutes ago"><meta name="justnow-prompt" content="just now"><meta name="generator" content="Jekyll v4.2.1" /><meta property="og:title" content="Pyhton - TypeError 줄이기 (Function Annotation, MyPy)" /><meta name="author" content="D.G.Lee" /><meta property="og:locale" content="en" /><meta name="description" content="Overview" /><meta property="og:description" content="Overview" /><link rel="canonical" href="https://wsscc2021.github.io/posts/Pyhton-TypeError-%EC%A4%84%EC%9D%B4%EA%B8%B0-(Function-Annotation,-MyPy)/" /><meta property="og:url" content="https://wsscc2021.github.io/posts/Pyhton-TypeError-%EC%A4%84%EC%9D%B4%EA%B8%B0-(Function-Annotation,-MyPy)/" /><meta property="og:site_name" content="D.G.Lee" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2021-10-02T16:00:00+09:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="Pyhton - TypeError 줄이기 (Function Annotation, MyPy)" /><meta name="google-site-verification" content="google_meta_tag_verification" /> <script type="application/ld+json"> {"author":{"@type":"Person","name":"D.G.Lee"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://wsscc2021.github.io/posts/Pyhton-TypeError-%EC%A4%84%EC%9D%B4%EA%B8%B0-(Function-Annotation,-MyPy)/"},"description":"Overview","url":"https://wsscc2021.github.io/posts/Pyhton-TypeError-%EC%A4%84%EC%9D%B4%EA%B8%B0-(Function-Annotation,-MyPy)/","@type":"BlogPosting","headline":"Pyhton - TypeError 줄이기 (Function Annotation, MyPy)","dateModified":"2021-10-02T16:56:36+09:00","datePublished":"2021-10-02T16:00:00+09:00","@context":"https://schema.org"}</script><title>Pyhton - TypeError 줄이기 (Function Annotation, MyPy) | D.G.Lee</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="D.G.Lee"><meta name="application-name" content="D.G.Lee"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://fonts.gstatic.com"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="preconnect" href="https://cdn.jsdelivr.net"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1.1.0/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script><body data-spy="scroll" data-target="#toc"><div id="sidebar" class="d-flex flex-column align-items-end" lang="en"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" alt="avatar" class="mx-auto"> <img src="/assets/img/avatar.png" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">D.G.Lee</a></div><div class="site-subtitle font-italic">I'm interested in cloud-computing and believe in the power of communication.</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tags ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center"> <a href="https://github.com/wsscc2021" aria-label="github" class="order-3" target="_blank" rel="noopener"> <i class="fab fa-github-alt"></i> </a> <a href="https://twitter.com/" aria-label="twitter" class="order-4" target="_blank" rel="noopener"> <i class="fab fa-twitter"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['piou987','gmail.com'].join('@')" aria-label="email" class="order-5" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" class="order-6" > <i class="fas fa-rss"></i> </a> <span class="icon-border order-2"></span> <span id="mode-toggle-wrapper" class="order-1"> <i class="mode-toggle fas fa-adjust"></i> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } var self = this; /* always follow the system prefers */ this.sysDarkPrefers.addListener(function() { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.updateMermaid(); }); } /* constructor() */ setDark() { $('html').attr(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_KEY); sessionStorage.removeItem(ModeToggle.MODE_KEY); } get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode == ModeToggle.DARK_MODE; } get isLightMode() { return this.mode == ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer) ) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } updateMermaid() { if (typeof mermaid !== "undefined") { let expectedTheme = (this.modeStatus === ModeToggle.DARK_MODE? "dark" : "default"); let config = { theme: expectedTheme }; /* re-render the SVG › <https://github.com/mermaid-js/mermaid/issues/311#issuecomment-332557344> */ $(".mermaid").each(function() { let svgCode = $(this).prev().children().html(); $(this).removeAttr("data-processed"); $(this).html(svgCode); }); mermaid.initialize(config); mermaid.init(undefined, ".mermaid"); } } flipMode() { if (this.hasMode) { if (this.isSysDarkPrefer) { if (this.isLightMode) { this.clearMode(); } else { this.setLight(); } } else { if (this.isDarkMode) { this.clearMode(); } else { this.setDark(); } } } else { if (this.isSysDarkPrefer) { this.setLight(); } else { this.setDark(); } } this.updateMermaid(); } /* flipMode() */ } /* ModeToggle */ let toggle = new ModeToggle(); $(".mode-toggle").click(function() { toggle.flipMode(); }); </script> </span></div></div><div id="topbar-wrapper" class="row justify-content-center topbar-down"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> Home </a> </span> <span>Pyhton - TypeError 줄이기 (Function Annotation, MyPy)</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> <i class="fa fa-times-circle fa-fw" id="search-cleaner"></i> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="post-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>Pyhton - TypeError 줄이기 (Function Annotation, MyPy)</h1><div class="post-meta text-muted d-flex flex-column"><div> <span class="semi-bold"> D.G.Lee </span> on <span class="timeago " data-toggle="tooltip" data-placement="bottom" title="Sat, Oct 2, 2021, 4:00 PM +0900" >Oct 2<i class="unloaded">2021-10-02T16:00:00+09:00</i> </span></div><div> <span> Updated <span class="timeago lastmod" data-toggle="tooltip" data-placement="bottom" title="Sat, Oct 2, 2021, 4:56 PM +0900" >Oct 2<i class="unloaded">2021-10-02T16:56:36+09:00</i> </span> </span> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="2159 words">11 min read</span></div></div><div class="post-content"><h2 id="overview">Overview</h2><p>파이썬을 다루다가 보면 실행 중에 갑작스런 <code class="language-plaintext highlighter-rouge">TypeError</code>를 접했던 경험이 종종 있었습니다. 이를 몇 번 접하고 나서 Type에 대해 정확하게 이해하고 이러한 오류를 줄일 수 있는 방법을 찾아본 내용을 공유합니다.</p><h2 id="데이터-타입">데이터 타입</h2><p>데이터 타입은 프로그래밍 언어에서 데이터의 형태를 의미합니다. (int, float, string, list, dictionary …)</p><p>프로그램 상에서 데이터는 메모리에 저장되어 사용됩니다. 데이터 타입은 데이터가 메모리에 저장될 때 확보해야하는 메모리 크기를 결정하고 메모리에 저장되어 있는 2진수를 어떻게 해석할 지에 대해 컴퓨터에게 알려주기 위해 존재합니다. 이를 통해 다양한 데이터 형태를 표현하더라도 메모리 공간을 효율적으로 활용할 수 있습니다.</p><h2 id="정적-타입-vs-동적-타입">정적 타입 vs 동적 타입</h2><p><strong>정적 타입</strong> : <strong>“정적 타입은 개발자가 직접 코드 상에 타입을 지정하며, 컴파일 시 자료형이 결정됩니다.”</strong> 이는 타입 에러로 인한 문제점을 조기에 발견하여 프로그램 실행 중 에러가 발생하는 것을 최소화할 수 있습니다. (e.g. Java)</p><p><strong>동적 타입</strong> : <strong>“동적 타입은 개발자가 별도로 타입을 지정하지 않으며, 컴파일 시 자료형이 결정되는 것이 아니라 런타임에 결정됩니다.”</strong> 이는 작고 간단한 프로젝트나 스크립트의 개발 속도를 높일 수 있는 요소가 됩니다. (e.g. Python, Javascript)</p><p>&gt;</p><p>컴파일 시 에러가 발생하는 것은 개발의 속도를 늦추는 요소가 될 수 있지만, 런타임 에러를 최소화할 수 있는 장점을 가집니다. 이는 런타임 에러 발생 시 큰 영향을 받을 수 있는 대규모 프로젝트를 진행할 때 긍정적으로 생각할 수 있습니다. 반면 동적 타입의 경우 빠른 개발이 필요한 프로젝트나 스크립트에서 긍정적으로 생각할 수 있습니다.</p><h2 id="약타입-vs-강타입">약타입 vs 강타입</h2><p>동적 타입 언어는 약타입과 강타입 으로 다시 구분됩니다.</p><ul><li>약타입 : 자료형이 맞지 않을 시에 프로그래밍 언어 자체에서 암묵적으로 타입을 변환합니다. (e.g. javascript)<li>강타입 : 자료형이 맞지 않을 때 에러가 발생합니다. (암묵적 변환을 지원하지 않습니다.) (e.g. python)</ul><p>이해를 위해 아래 예시를 살펴 보면, 자바스크립트의 경우 개발자가 integer 타입으로 사용하기 위해 따옴표 없이 표현했더라도 <code class="language-plaintext highlighter-rouge">+</code> operation을 처리하기 위해서 프로그래밍 언어 자체에서 암묵적으로 String 타입으로 변환하여 프로그램을 실행시킵니다. 반면 파이썬의 경우 <code class="language-plaintext highlighter-rouge">+</code> operation을 수행할 수 없다며 <code class="language-plaintext highlighter-rouge">TypeError</code> 를 발생시킵니다.</p><div class="language-javascript highlighter-rouge"><div class="code-header" text-data="javascript"><button data-original-title="Copied!"><i class="far fa-clone"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="mi">1</span><span class="o">+</span><span class="dl">"</span><span class="s2">1</span><span class="dl">"</span><span class="p">);</span>
<span class="c1">// 출력: 11</span>
</pre></table></code></div></div><div class="language-python highlighter-rouge"><div class="code-header" text-data="python"><button data-original-title="Copied!"><i class="far fa-clone"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre><span class="k">print</span><span class="p">(</span><span class="mi">1</span><span class="o">+</span><span class="s">"1"</span><span class="p">)</span>
<span class="c1"># 에러 : TypeError: unsupported operand type(s) for +: 'int' and 'str'
</span></pre></table></code></div></div><p>&gt;</p><ul><li>약타입<ul><li>장점 : 런타임 에러를 최소화하여 프로그램이 끝까지 실행되도록 할 수 있습니다.<li>단점 : 개발자가 원하지 않는 동작을 프로그램에서 실행할 수 있으며, 이러한 동작 오류는 에러가 발생하는 것이 아니기 때문에 찾기가 힘듭니다.</ul><li>강타입:<ul><li>장점 : 암묵적 변환이 이뤄지지 않기 때문에 디버깅하기 쉬워집니다.<li>단점 : 런타임 에러가 발생하여 프로그램이 동작하지 않을 수 있습니다.</ul></ul><p>실제로 자바스크립트는 동적 타입 중에서도 약타입을 사용하기 때문에 큰 프로젝트에서 단점이 극명하게 드러났습니다. 자바스크립트가 node.js 를 통해 백엔드에서 활용되는 등 다양한 곳에서 활용되고 점차 발전해나가자 이러한 단점을 극복하기 위해 정적 타입을 지원하는 타입스크립트가 개발되었습니다.</p><h2 id="duck-typing">Duck Typing</h2><p>Duck Typing은 ‘오리처럼 걷고, 오리처럼 꽥꽥거리면, 그것은 틀림없이 오리다.’ 라는 의미를 가지고 있습니다.</p><p>이는 개발자가 별도로 타입을 지정하지 않고, 프로그래밍 언어가 데이터의 모습을 보고 판단하여 타입을 결정한다는 의미로 해석할 수 있습니다.</p><div class="language-python highlighter-rouge"><div class="code-header" text-data="python"><button data-original-title="Copied!"><i class="far fa-clone"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre><span class="n">a</span> <span class="o">=</span> <span class="mi">1</span>
<span class="n">b</span> <span class="o">=</span> <span class="s">"1"</span>
<span class="k">print</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">a</span><span class="p">))</span>
<span class="k">print</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">b</span><span class="p">))</span>
</pre></table></code></div></div><div class="language-plaintext highlighter-rouge"><div class="code-header" text-data="plaintext"><button data-original-title="Copied!"><i class="far fa-clone"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre>&lt;class 'int'&gt;
&lt;class 'str'&gt;
</pre></table></code></div></div><h2 id="python---function-annotation">Python - Function Annotation</h2><p>파이썬은 동적 타입 언어이며 Duck Typing 특징을 가지고 있기 때문에, 데이터 타입에 대한 가독성이 다소 떨어질 수 있습니다. 만약 파이썬으로 다른 개발자와 협업하거나 대규모 프로젝트를 진행할 때에는 가독성을 위해 코드 상에 타입을 명확하게 표현할 수 있는 방법이 필요합니다.</p><p>Function Annotation은 데이터 타입의 힌트를 제공하며, 이를 통해 코드 상에 타입을 명확하게 표현할 수 있습니다. (**타입을 제한하는 것이 아니라 힌트를 주는 것입니다.)</p><div class="language-python highlighter-rouge"><div class="code-header" text-data="python"><button data-original-title="Copied!"><i class="far fa-clone"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre><td class="rouge-code"><pre><span class="k">def</span> <span class="nf">add</span><span class="p">(</span><span class="n">a</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">b</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span> <span class="c1"># return type is defined "-&gt; int"
</span>    <span class="k">return</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span>

<span class="n">num_a</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span>
<span class="n">num_b</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">2</span>
<span class="n">add</span><span class="p">(</span><span class="n">num_a</span><span class="p">,</span><span class="n">num_b</span><span class="p">)</span>
</pre></table></code></div></div><p>Function Annotation 기능은 Python3 부터 지원하기 시작했으며 이전에는 Comment를 사용하여 타입을 명시 했었습니다.</p><div class="language-python highlighter-rouge"><div class="code-header" text-data="python"><button data-original-title="Copied!"><i class="far fa-clone"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
</pre><td class="rouge-code"><pre><span class="k">def</span> <span class="nf">add</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">):</span>
    <span class="s">"""
        a: int
        b: int
        return type: int 
    """</span>
    <span class="k">return</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span>

<span class="n">num_a</span> <span class="o">=</span> <span class="mi">1</span> <span class="c1"># type: int
</span><span class="n">num_b</span> <span class="o">=</span> <span class="mi">2</span> <span class="c1"># type: int
</span><span class="n">add</span><span class="p">(</span><span class="n">num_a</span><span class="p">,</span><span class="n">num_b</span><span class="p">)</span>
</pre></table></code></div></div><p>저는 기능에 대한 간략한 흐름과 사용하는 이유에 대해 설명하고 있지만 자세한 문법과 사용방법은 공식 홈페이지를 통해 배우는 것이 가장 정확하고 효율적이라고 생각합니다.</p><ul><li><a href="https://www.python.org/dev/peps/pep-3107/">https://www.python.org/dev/peps/pep-3107/</a> (Function Annotation)<li><a href="https://docs.python.org/3/library/typing.html">https://docs.python.org/3/library/typing.html</a> (typing - standard library)</ul><h2 id="pyhthon---mypy">Pyhthon - MyPy</h2><p>파이썬은 동적 타입 언어이기 때문에 런타임 타입에러가 발생할 수 있습니다. 런타임 에러는 프로그램이 실행 중에 발생하는 에러로써 운영환경에서 발생할 경우 사용자 경험이 낮아질 수 있습니다. 때문에 프로그램 실행 전에 타입에러를 발견하고 조치할 필요가 있습니다.</p><p>MyPy는 정적 타입 체크를 도와주는 파이썬의 Standard Library 입니다. (정적 테스트는 프로그램 실행 전에 코드를 기반으로 테스트를 진행하는 테스트 기법입니다.) 예시를 통해 어떻게 동작하는 간단하게 살펴봅니다.</p><p><code class="language-plaintext highlighter-rouge">MyPy Library 설치 </code></p><div class="language-bash highlighter-rouge"><div class="code-header" text-data="bash"><button data-original-title="Copied!"><i class="far fa-clone"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>python3 <span class="nt">-m</span> pip <span class="nb">install </span>mypy
</pre></table></code></div></div><p>만약 타입 에러가 발생하지 않는 코드를 mypy를 통해 테스트해보면 아래와 같이 성공 메시지를 반환받습니다.</p><p><code class="language-plaintext highlighter-rouge">type_python.py</code></p><div class="language-python highlighter-rouge"><div class="code-header" text-data="python"><button data-original-title="Copied!"><i class="far fa-clone"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre><td class="rouge-code"><pre><span class="k">def</span> <span class="nf">add</span><span class="p">(</span><span class="n">a</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">b</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
    <span class="k">return</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span>

<span class="n">num_a</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span>
<span class="n">num_b</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">2</span>
<span class="n">add</span><span class="p">(</span><span class="n">num_a</span><span class="p">,</span> <span class="n">num_b</span><span class="p">)</span>
</pre></table></code></div></div><div class="language-bash highlighter-rouge"><div class="code-header" text-data="bash"><button data-original-title="Copied!"><i class="far fa-clone"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre>python3 <span class="nt">-m</span> mypy type_python.py
<span class="c"># Success: no issues found in 1 source file</span>
</pre></table></code></div></div><p>만약 타입 에러가 포함된 코드를 테스트하면 아래와 같이 실패 메시지와 에러가 발생하는 시점을 확인할 수 있습니다.</p><p><code class="language-plaintext highlighter-rouge">type_python.py</code></p><div class="language-python highlighter-rouge"><div class="code-header" text-data="python"><button data-original-title="Copied!"><i class="far fa-clone"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre><td class="rouge-code"><pre><span class="k">def</span> <span class="nf">add</span><span class="p">(</span><span class="n">a</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">b</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
    <span class="k">return</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span>

<span class="n">num_a</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span>
<span class="n">num_b</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s">"a"</span>
<span class="n">add</span><span class="p">(</span><span class="n">num_a</span><span class="p">,</span> <span class="n">num_b</span><span class="p">)</span>
</pre></table></code></div></div><div class="language-bash highlighter-rouge"><div class="code-header" text-data="bash"><button data-original-title="Copied!"><i class="far fa-clone"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre>python3 <span class="nt">-m</span> mypy type_python.py
<span class="c"># type_python.py:7: error: Argument 2 to "add" has incompatible type "str"; expected "int"</span>
<span class="c"># Found 1 error in 1 file (checked 1 source file)</span>
</pre></table></code></div></div><p>Function Annotation과 같은 맥락으로 자세한 내용은 공식 홈페이지를 참조합니다.</p><ul><li><a href="https://github.com/python/mypy">https://github.com/python/mypy</a> (Github)<li><a href="https://mypy.readthedocs.io/en/stable/index.html#">https://mypy.readthedocs.io/en/stable/index.html#</a> (ReadHat)</ul><h2 id="결론">결론</h2><p>파이썬을 사용할 때에는 Function Annotation을 통해 타입을 코드 상에 표현하여 가독성을 높이고 MyPy Library를 사용하여 프로그램을 실행하기 전에 사전에 타입에러를 발견하고 조치하여 런타임 에러를 최소화하는 노력이 필요합니다.</p></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/python/'>Python</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/python/" class="post-tag no-text-decoration" >Python</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=Pyhton - TypeError 줄이기 (Function Annotation, MyPy) - D.G.Lee&url=https://wsscc2021.github.io/posts/Pyhton-TypeError-%EC%A4%84%EC%9D%B4%EA%B8%B0-(Function-Annotation,-MyPy)/" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=Pyhton - TypeError 줄이기 (Function Annotation, MyPy) - D.G.Lee&u=https://wsscc2021.github.io/posts/Pyhton-TypeError-%EC%A4%84%EC%9D%B4%EA%B8%B0-(Function-Annotation,-MyPy)/" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://telegram.me/share?text=Pyhton - TypeError 줄이기 (Function Annotation, MyPy) - D.G.Lee&url=https://wsscc2021.github.io/posts/Pyhton-TypeError-%EC%A4%84%EC%9D%B4%EA%B8%B0-(Function-Annotation,-MyPy)/" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="Copy link" title-succeed="Link copied successfully!"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted topbar-down"><div class="access"><div id="access-lastmod" class="post"> <span>Recent Update</span><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/%EC%BB%A8%ED%85%8C%EC%9D%B4%EB%84%88-%EA%B8%B0%EC%88%A0-%EC%9D%B4%ED%95%B4%ED%95%98%EA%B8%B0/">컨테이너 기술 이해하기</a><li><a href="/posts/%EB%A7%88%EC%9D%B4%ED%81%AC%EB%A1%9C%EC%84%9C%EB%B9%84%EC%8A%A4-%EC%95%84%ED%82%A4%ED%85%8D%EC%B2%98-%EC%9D%B4%ED%95%B4%ED%95%98%EA%B8%B0/">마이크로서비스 아키텍처 이해하기</a><li><a href="/posts/Kubernetes-Healthcheck-(liveness-probe,-startup-probe,-readiness-probe)/">Kubernetes - Healthcheck (liveness-probe, startup-probe, readiness-probe)</a><li><a href="/posts/Pyhton-TypeError-%EC%A4%84%EC%9D%B4%EA%B8%B0-(Function-Annotation,-MyPy)/">Pyhton - TypeError 줄이기 (Function Annotation, MyPy)</a><li><a href="/posts/%EB%B8%94%EB%A1%9C%EA%B7%B8-%EC%8B%9C%EC%9E%91%ED%95%98%EA%B8%B0/">블로그 시작하기</a></ul></div><div id="access-tags"> <span>Trending Tags</span><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/devops/">DevOps</a> <a class="post-tag" href="/tags/blog-management/">Blog-management</a> <a class="post-tag" href="/tags/kubernetes/">Kubernetes</a> <a class="post-tag" href="/tags/python/">Python</a> <a class="post-tag" href="/tags/container/">Container</a> <a class="post-tag" href="/tags/architect/">Architect</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"> <span class="pl-3 pt-2 mb-2">Contents</span><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="post-extend-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/Python-OOP-%EC%A0%95%EB%B3%B4%EC%9D%80%EB%8B%89%EC%97%90-%EB%8C%80%ED%95%9C-%EA%B3%A0%EB%AF%BC-(Name-Mangling,-Property)/"><div class="card-body"> <span class="timeago small" >Oct 1<i class="unloaded">2021-10-01T18:00:00+09:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Python - OOP 정보은닉에 대한 고민 (Name Mangling, Property)</h3><div class="text-muted small"><p> Overview 파이썬을 OOP 방식으로 사용하려고 살펴보다가 문득 “파이썬은 접근제어자가 없는 데 어떤 방식으로 정보은닉을 만족시킬 수 있을까??” 라는 고민을 시작하게 되었습니다. 이번 글에서는 위 질문에 대답하기 위해 찾아본 내용을 공유하려 합니다. 우선 정보은닉이 무엇인지 이해할 필요가 있습니다. OOP에서는 연관 있는 데이터와 함수를 클래...</p></div></div></a></div><div class="card"> <a href="/posts/Python-%EC%9E%84%EC%8B%9C-%ED%8C%8C%EC%9D%BC-%EB%8B%A4%EB%A3%A8%EA%B8%B0-(tempfile)/"><div class="card-body"> <span class="timeago small" >Oct 4<i class="unloaded">2021-10-04T14:00:00+09:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Python - 임시 파일 다루기 (tempfile)</h3><div class="text-muted small"><p> Overview 저는 아래와 같은 과정(*경험)을 겪으면서 임시파일을 다루는 것에 대한 필요성을 느꼈습니다. Python 기반의 Flask 어플리케이션을 개발하면서… 로컬에서 Unit Test를 진행하고자 했습니다. → 어플리케이션에는 사용자 데이터를 데이터베이스에 저장하는 로직이 포함되어 있었기 때문에 이를 테스트 하기 위해서 테스트용 데이터베이...</p></div></div></a></div><div class="card"> <a href="/posts/Kubernetes-Cluster-Autoscaler-+-OverProvisioning/"><div class="card-body"> <span class="timeago small" >Oct 27<i class="unloaded">2021-10-27T15:00:00+09:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Kubernetes - Cluster Autoscaler + OverProvisioning</h3><div class="text-muted small"><p> 컨테이너 생성 시간 vs VM 생성 시간 컨테이너는 VM보다 경량적인 isolation 기술로써, VM보다 이미지 크기가 작고 빠르게 프로비저닝되는 장점을 가지고 있습니다. 이는 분산 시스템 형태에서 수평적 확장을 수행하는 클라우드 환경에서 더욱 부각됩니다. 때문에 일반적으로 클라우드 환경에서는 클라우드 업체에서 제공해주는 VM 위에서 경량의 컨테...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/Python-OOP-%EC%A0%95%EB%B3%B4%EC%9D%80%EB%8B%89%EC%97%90-%EB%8C%80%ED%95%9C-%EA%B3%A0%EB%AF%BC-(Name-Mangling,-Property)/" class="btn btn-outline-primary" prompt="Older"><p>Python - OOP 정보은닉에 대한 고민 (Name Mangling, Property)</p></a> <a href="/posts/Python-%EC%9E%84%EC%8B%9C-%ED%8C%8C%EC%9D%BC-%EB%8B%A4%EB%A3%A8%EA%B8%B0-(tempfile)/" class="btn btn-outline-primary" prompt="Newer"><p>Python - 임시 파일 다루기 (tempfile)</p></a></div><script src="https://utteranc.es/client.js" repo="wsscc2021/wsscc2021.github.io" issue-term="title" theme="github-light" crossorigin="anonymous" async> </script></div></div></div><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center"><div class="footer-left"><p class="mb-0"> © 2021 <a href="https://github.com/wsscc2021/wsscc2021.github.io">wsscc2021</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><h4 class="text-muted mb-4">Trending Tags</h4><a class="post-tag" href="/tags/devops/">DevOps</a> <a class="post-tag" href="/tags/blog-management/">Blog management</a> <a class="post-tag" href="/tags/kubernetes/">Kubernetes</a> <a class="post-tag" href="/tags/python/">Python</a> <a class="post-tag" href="/tags/container/">Container</a> <a class="post-tag" href="/tags/architect/">Architect</a></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><script src="https://cdn.jsdelivr.net/npm/mermaid@8/dist/mermaid.min.js"></script> <script> $(function() { let initTheme = "default"; if ($("html[mode=dark]").length > 0 || ($("html[mode]").length == 0 && window.matchMedia("(prefers-color-scheme: dark)").matches ) ) { initTheme = "dark"; } let mermaidConf = { theme: initTheme /* <default|dark|forest|neutral> */ }; /* Markdown converts to HTML */ $("pre").has("code.language-mermaid").each(function() { let svgCode = $(this).children().html(); $(this).addClass("unloaded"); $(this).after(`<div class=\"mermaid\">${svgCode}</div>`); }); mermaid.initialize(mermaidConf); }); </script><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="https://wsscc2021.github.io{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/lozad/dist/lozad.min.js,npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script> /* see: <https://docs.mathjax.org/en/latest/options/input/tex.html#tex-options> */ MathJax = { tex: { inlineMath: [ /* start/end delimiter pairs for in-line math */ ['$','$'], ['\\(','\\)'] ], displayMath: [ /* start/end delimiter pairs for display math */ ['$$', '$$'], ['\\[', '\\]'] ] } }; </script> <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script> <script type="text/javascript" id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"> </script> <script src="https://cdn.jsdelivr.net/combine/npm/popper.js@1.16.1,npm/bootstrap@4/dist/js/bootstrap.min.js"></script> <script defer src="/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id=G-2Y7BLPLM54"></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'G-2Y7BLPLM54'); }); </script>
